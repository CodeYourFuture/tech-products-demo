/users:
  get:
    tags: [Users]
    description: Get all users.
    security:
      - sudoToken: []
    responses:
      200:
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "#/components/schemas/User"
      401:
        $ref: "#/components/responses/UnauthorizedError"
      500:
        $ref: "#/components/responses/InternalServerError"

/users/{id}:
  get:
    tags: [Users]
    description: |
      Get user's resources by source equal to parameter id.

      **Note**: Published resources, belonging to the authenticated user, are available to all users; drafts are only accessible to admin users.
    security:
      - sudoToken: []
    parameters:
      - in: path
        name: id
        required: true
        schema:
          type: string
          format: uuid
    requestBody:
      required: false
    responses:
      200:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PaginatedResources"
      400:
        $ref: "#/components/responses/BadRequestError"
      401:
        $ref: "#/components/responses/UnauthorizedError"
      404:
        $ref: "#/components/responses/NotFoundRequestError"
      500:
        $ref: "#/components/responses/InternalServerError"
  patch:
    tags: [Users]
    description: |
      Update one user.

      **Note**: currently only supports setting `is_admin` status.
    security:
      - sudoToken: []
    parameters:
      - in: path
        name: id
        required: true
        schema:
          type: string
          format: uuid
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required: ["is_admin"]
            properties:
              is_admin:
                type: boolean
                example: true
    responses:
      200:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/User"
      400:
        $ref: "#/components/responses/BadRequestError"
      401:
        $ref: "#/components/responses/UnauthorizedError"
      500:
        $ref: "#/components/responses/InternalServerError"
